---
title: 数组操作
---

> arr.reduce(callback,[initialValue])

accumulator 上一次调用回调返回的值，或者是提供的初始值（initialValue）

currentValue 数组中正在处理的元素

currentIndex 数据中正在处理的元素索引，如果提供了 initialValue ，从0开始；否则从1开始

array 调用 reduce 的数组

initialValue 可选项，其值用于第一次调用 callback 的第一个参数。

## 将数组所有项相加

```js
var sum = [0, 1, 2, 3].reduce(function(a, b) {
    return a + b;
}, 0);
// sum is 6
```

## 数组扁平化

```js
var flattened = [[0, 1], [2, 3], [4, 5]].reduce(function(a, b) {
    return a.concat(b);
}, []);
// flattened is [0, 1, 2, 3, 4, 5]
```

## 计算数组中各个值出现次数

```js
var names = ['Alice', 'Bob', 'Tiff', 'Bruce', 'Alice'];

var countedNames = names.reduce(function(allNames, name) {
  if (name in allNames) {
    allNames[name]++;
  }
  else {
    allNames[name] = 1;
  }
  return allNames;
}, {});
// countedNames is { 'Alice': 2, 'Bob': 1, 'Tiff': 1, 'Bruce': 1 }
```

## 对象数组的连接要使用展开运算符和初始值

```js
// friends - an array of objects
// where object field "books" - list of favorite books
var friends = [
{ name: "Anna", books: ["Bible", "Harry Potter"], age: 21 },
{ name: "Bob", books: ["War and peace", "Romeo and Juliet"], age: 26 },
{ name: "Alice", books: ["The Lord of the Rings", "The Shining"], age: 18 }
]

// allbooks - list which will contain all friends books +
// additional list contained in initialValue
var allbooks = friends.reduce(function(prev, curr) {
  return [...prev, ...curr.books];
}, ["Alphabet"]);

// allbooks = ["Alphabet", "Bible", "Harry Potter", "War and peace",
// "Romeo and Juliet", "The Lord of the Rings", "The Shining"]
```
