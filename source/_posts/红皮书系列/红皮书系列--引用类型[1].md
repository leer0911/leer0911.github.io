---
title: 《JS高级程序》引用类型[1]
date: 2016-12-24
---
引用类型的值是引用类型的一个实例。在ECMAScript中，引用类型是一种数据结构，用于将数据和功能组织在一起。

引用类型有时候也被称为对象定义，因为他们描述的是一类对象所具有的属性和方法。对象是某个特定的引用类型的实例。 新对象用new操作符后跟一个构造函数来创建。构造函数本身就是一个函数，只不过该函数时出于创建新对象的目的而定义的。

## Object类型
大多数引用类型值都是Object类型的实例；虽然不具备多少功能但对于在应用程序中存储和传输数据而言，它们确实是非常理想的选择。 创建Object实例的方式有两种：
*   第一种是使用new操作符后跟Object构造函数；
*   第二种是用对象字面量的表示法；

## Array类型
数组的每一项可用来保存任何类型的数据，而且其大小是可以动态调整的。 创建方式有两种：
*   第一种是使用new操作符后跟Object构造函数；
*   第二种是用对象字面量的表示法；

*   ### 检测数组
    对于一个网页或者一个全局作用域而言，用instanceof操作符来检测`value instanceof Array`其问题在于，它假定只有一个全局执行环境。 如果网页包含多个框架，那实际上就存在两个以上不同版本的Array构造函数。ECMAScript新增了isArray()方法

*   ### 栈方法
    ECMAScript 数组也提供了一种让数组的行为类似于其他数据结构的方法。具体说来，数组可以表现得就像栈一样，后者是一种可以限制插入和删除项的数据结构。 栈是一种LIFO的数据结构，也就是最新添加的项最早被移除。而栈中项的插入(叫做推入)和移除(叫做弹出)，只发生在一个位置，栈的顶部。ECMAScript为数组 专门提供了push()和pop()方法，以便实现类似栈的行为。

*   ### 队列方法
    队列数据结构的访问规则是FIFO(先进先出)。队列在列表的末端添加项，从列表的前端移除项。实现这一操作的数组方法就是shift()，结合shift()和push()方法， 就可以像使用队列一样使用数组。

*   ### 重排序方法
    数组中已经存在连个直接用来重排序的方法reverse()和sort()。sort()是按升序的方式排列数组，为了实现排序，sort()会调用每个数组项的toString()转型方法。 即使数组中每一项都是数值，也是比较字符串。返回值是经过排序后的数组。

*   ### 操作方法
    concat()：基于当前数组中的所有项创建一个新数组。
    slice()：返回从该参数指定位置开始到当前数组末尾的所有项。如果有两个参数则从起始位置和结束位置间的项(不包括结束位置的项)*不影响原始数组*
    splice()：主要用途是向数组的中部插入项，有3中方法：
    *   删除：可以删除任意项，只需指定2个参数：要删除的第一项位置和要删除的项数；
    *   插入：可以向指定位置插入任意项，只需提供3个参数：起始位置、0(要删除的项数)和要插入的项。
    *   替换：起始位置、要删除的项数和要插入的任意数量项。
    该方法始终会返回一个数组，该数组中包含从原始数组中删除的项如果没有删除任何项，则返回一个空数组。

    ```js
      var colors = ["red", "green", "blue"];
      var removed = colors.splice(0,1);
      alert(colors);
      alert(removed);
      removed = colors.splice(1, 0, "yellow", "orange");
      alert(colors);
      alert(removed);
      removed = colors.splice(1, 1, "red", "purple");
      alert(colors);
      alert(removed);
    ```

*   ### 位置方法
    两个都接收参数，要查找的项和表示查找七点的位置索引。
    indexOf()：从数组开头开始；
    lastIndexOf()：从数组末尾开始；

*   ### 迭代方法
    定义了5中迭代方法。每个方法都接收两个参数：要在每一项上运行的函数和运行该函数的作用域对象-影响this的值。传入这些方法的函数会接收三个参数：数组项的值、该项在数组中的位置和数组对象本身。
*   every()：对数值中的每一项运行给定的函数，如果该函数对每一项都有返回true则返回true。
*   filter()：对数值中的每一项运行给定的函数，返回该函数会返回true的项组成的数组。
*   forEach()：对数组中的每一项运行给定的函数，这个方法没有返回值。
*   map()：对数组中的每一项运行给定的函数。返回每次函数调用的结果组成的数组。
*   some()：对数组中的每一项运行给定的函数，如果该函数对任一项返回true，则返回true。
    every和some最为相似，用于查询数组中的项是否满足某个条件。对于every()俩说，传入的函数
    必须对每一项都返回true，这个方法才返回true。而some()则只要有一项满足即返回true。

*   ### 归并方法
    ECMAScript5新增了两个归并数组的方法：reduce()和reduceRight()。这两个方法都会迭代数组的所有项，然后构建一个最终返回的值。 reduce方法从数组第一项开始，逐个遍历到最后。而reduceRight()则从数组的最后一项开始，向前遍历到第一项。 这两个方法都接收两个参数：一个在每一项上调用的函数和左右归并基础的初始值。传给reducce和reduceRight的函数接收4个参数：前一个值、当前值、项的索引和数组对象。 这个函数返回的任何值都会作为第一个参数自动传给下一项。

    ```js
      var values = [1,2,3,4,5];
      var sum = values.reduce(function(prev, cur, index, array){
        return prev + cur;
      });
      alert(sum);
    ```

## Date类型

*   ### 日期格式化方法
*   toDateString()：以特定于实现的格式显示星期几、月、日和年；
*   toTimeString()：以特定于实现的格式显示时、分、秒和时区；
*   toLocaleDateString()
*   toLocaleTimeString()
*   toUTCString()

## RegExp类型
`var expression = /pattern/ flags ;` 其中模式(pattern)部分可以是任何简单或复杂的正则表达式，可以包含字符类、限定符、分组、向前查找以及反向引用。每个正则表达式都可带有一个或 多个标志(flags)，用以表明正则表达式的行为。 正则表达式的匹配模式支持下列三个标志。
*   g：表示全局模式，即模式将应用于所有字符串，而非在发现第一个匹配项时立即停止；
*   i：表示不区分大小写模式；
*   m：表示多行模式，即在到达一行文本末尾时还会继续查找下一行中是否存在于模式匹配的项。
模式中所有的元字符都必须转义。正则表达式元字符包括：
`([{\^$|?*+.}])`
*   RegExp实例属性：
*   global：布尔值，表示是否否设置了g标志。
*   ignoreCase：布尔值，表示是否设置了i标志。
*   mutiline：布尔值，表示是否设置了m标志。
*   lastIndex：整数，表示开始搜索下一个匹配项的字符位置，从0算起。
*   source：正则表达式的字符串表示，按照字面量的形式而非传入构造函数中的字符串模式范湖。
*   RegExp对象方法：
*   exec()是专门为捕获组而设计的。接收一个参数，即要应用模式的字符串，然后返回包含第一个匹配项信息的数组；
*   RegExp构造函数属性
  包含一些属性，这些属性分别有一个长属性名和短属性名(Opera不支持短属性名)
*   input `$_` 最近一次要匹配的字符串
*   lastMatch `$&` 最近一次的匹配项
*   lastParen `$+` 最近一次的匹配的捕获组
*   leftContext `$` input字符串中lastMatch之前的文本
*   multiline `$*` 是否为多行模式
*   rightContext `$'` input字符串中lastMatch之后的文本
