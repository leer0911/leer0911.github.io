---
title: 《JS高级程序》在HTMl中使用JavaScript
date: 2016-7-2
---

## script元素
HTML4.01为`<script>`定义了以下属性：
*   async: 可选。表示应该立即下载脚本，但不妨碍页面中的其他操作，比如下载其他资源或等待加载其他脚本。支队外部脚本文件有效。
*   charset: 可选。表示通过src属性指定的代码的字符集，大多数浏览器会忽略该值。
*   defer：可选。表示脚本可延迟到文档完全被解析和显示之后再执行。只对外部文件有效。
*   language: 已废弃。表示编写代码使用的脚本语言。
*   src: 可选。表示包含要执行代码的外部文件。
*   type: 可选。可看成是language的替代属性。表示编写代码使用的脚本语言的内容类型(也称为MIME类型)。
虽然 text/javascript 和 text/ecmascript 都已经不被推荐使用，但人们一直以来使用的都还是 text/javascript。实际上，服务器在传送 JavaScript 文件时使用的MIME 类型通常是 application/x–javascript，但在 type 中设置这个值却可能导致脚本被 忽略。 使用方法：

```js
  <script type="text/javascript">
    function sayHi(){
      alert("Hi!");
    }
  </script>
```

使用`<script>`嵌入JavaScript代码时，不要在代码中的任何地方出现`</script>`字符串。如需使用可用转义字符"\\"
  ```js
    <script type="text/javascript">
      // 错误形式
      function sayScript(){
        alert("</script>");
      }
      // 正确形式
      function sayScript(){
        alert("<\/script>");
      }
    </script>
  ```
在XHTML可省略`</script>`，但不能在HTML中使用这种语法。

## 延迟脚本
在元素中设置的defer属性，相当于告诉浏览器立即下载，但延迟执行。该属性浏览器兼容不一，建议把延迟脚本放在页面底部。
  ```js
    <script type="text/javascript" defer="defer" src="example.js"></script>
  ```

## 异步脚本
HTML5为script定义了async属性。指定async属性的目的是不让页面等待两个脚本下载和执行，从而异步加载页面的其他内容。为此建议异步脚本不要再加载期间修改DOM。
  ```js
    <script type="text/javascript" async="async" src="example.js"></script>
  ```

## 在XHTML的用法
可扩张超文本标记语言，即XHTML(Extensible HyperText Markup Language)，是将HTML作为XML的应用而重新定义的一个标准。 避免出现语法错误的方法有两个，一个使用相应的HTML实体`(&lt;)`替换小于号`(<)` 另一种方法：
  ```js
    <script type="text/javascript"><![CDATA[
      function compare(a, b) {
        if (a < b) {
          alert("A is less than B");
        } else if (a > b) {
          alert("A is greater than B");
        } else {
          alert("A is equal to B");
        }
      }
    ]]></script>
  ```

## 引入外部文件优点
*   可维护性
*   可缓存：浏览器能够根据具体的设置缓存链接所有外部JavaScript文件，如果有两个页面使用同一个文件，那么这个文件只需要下载一次。
*   适应未来：外部引入无需使用hack。

## 文档模式
混杂模式和标准模式，虽然这两种主要影响css内容呈现，但在某些情况下也会影响到JavaScript的解释执行。 如果在文档开始处没有文档类型声明，则所有浏览器都会默认个开启混合模式。 对于标准模式，可以通过使用下面任何一种文档类型来开启：
  ```html
  <!-- HTML 4.01 严格型 -->
  <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
  "http://www.w3.org/TR/html4/strict.dtd">
  <!-- XHTML 1.0 严格型 -->
  <!DOCTYPE html PUBLIC
  "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
  <!-- HTML 5 -->
  <!DOCTYPE html>
  ```

  而对于准标准模式，则可以通过使用过渡型（transitional）或框架集型（frameset）文档类型来触发，
  如下所示：
  ```html
  <!-- HTML 4.01 过渡型 -->
  <!DOCTYPE HTML PUBLIC
  "-//W3C//DTD HTML 4.01 Transitional//EN"
  "http://www.w3.org/TR/html4/loose.dtd">
  <!-- HTML 4.01 框架集型 -->
  <!DOCTYPE HTML PUBLIC
  "-//W3C//DTD HTML 4.01 Frameset//EN"
  "http://www.w3.org/TR/html4/frameset.dtd">
  <!-- XHTML 1.0 过渡型 -->
  <!DOCTYPE html PUBLIC
  "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <!-- XHTML 1.0 框架集型 -->
  <!DOCTYPE html PUBLIC
  "-//W3C//DTD XHTML 1.0 Frameset//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
  ```

## noscript元素
可用于浏览器不支持JavaScript时让页面平稳地退化。在浏览器不支持或禁用JavaScript情况下才会显示出来
```js
  <noscript>
    <p>本页面需要浏览器支持（启用） JavaScript。
  </noscript>
```
