---
title: 面向对象的程序设计
---

  面向对象的语言有一个标志，那就是他们都有类的概念，而通过类可以创建任意多个相同属性和方法的对象。
对象是无序属性的集合，其属性可以包含基本值、对象、或者函数。我们可以把对象想象成散列表：无非就是
一组名值对，其中值可以是数据或函数。
  每个对象都是基于一个引用类型创建的，这个引用类型可以是原生类型，也可以是开发人员定义的类型。

## 理解对象
  创建自定义对象最简单的方式就是创建一个Object实例，任何再给它添加属性和方法。对象字面量也是创建对象的首选模式。

## 属性类型
  ECMA-262在定义只有内部才用的特性时，描述了属性的各种特征。这些特性是为了实现JavaScript引擎用的，因此在JavaScript中不能直接访问他们。
  为了表示特性是内部值，该规范把它们放在了两对方括号中`[[enumeration]]`
  有两种属性：数据属性和访问器属性：
    * ### 数据属性
    数据属性包含一个数据值的位置。在这个位置可以读取和写入值。有4个描述其行为的特性。
     * [[Configurable]]:表示能否通过delete删除属性从而重新定义属性，能否修改属性的特性，或者能否把属性修改为访问器属性。默认值为true
     * [[Enumberable]]:表示能否通过for-in循环返回属性。默认值为true
     * [[Writeable]]:能否修改属性的值。默认为true
     * [[Value]]:包含这个属性的数据值。默认为undefined
    要修改属性的默认特性，必须使用ECMAScript5的Object.defineProperty()方法。方法接收三个参数：属性所在的对象、属性的名字和一个描述对象。其中描述符对象的属性
    必须是：configurable、enumerable、writeable和value。设置其中一个或多个值
    * ### 访问器属性
    访问器属性不包含数据值：它们包含一对儿getter和setter函数。
    ```js
      var book = {
          _year: 2004,//下划线是一种常用的记号，用于表示只能通过对象那个方法访问的属性。
          edition: 1
        };
        Object.defineProperty(book, "year", {
          get: function(){
            return this._year;
          },
          set: function(newValue){
            if (newValue > 2004) {
              this._year = newValue;
              this.edition += newValue - 2004;
            }
          }
      });
      book.year = 2005;
      alert(book.edition); //2
    ```

    定义多个属性，使用Object.defineProperties()方法
    ```js
      var book = {};
      Object.defineProperties(book, {
          _year: {
              value: 2004
          },
          edition: {
              value: 1
          },
          year: {
              get: function() {

                  return this._year;
              },
              set: function(newValue) {
                  if (newValue > 2004) {
                      this._year = newValue;
                      this.edition += newValue - 2004;
                  }
              }
          }
      })
    ```
    * ### 读取属性的特性
    Object.getOwnPropertyDescriptor()方法可以取得给定属性的描述符。这个方法接收两个参数：属性所在的对象和要读取描述符的属性名称。返回值是一个对象
    如果是访问器属性，这个对象属性有configurable、enumerable、get和set，如果是对象属性；configurable、enumerable、writeable和value

## 创建对象
虽然Object构造函数或对象字面量可以用来创建单个对象，但这些方式有个明显的缺点：使用同一个接口创建很多对象，
会产生大量的代码重复。为解决这个问题，可以使用工厂模式的一种变体。

  * ### 工厂模式
  ```js
    function createPerson(name, age, job) {
        var o = new Object();
        o.name = name;
        o.age = age;
        o.job = job;
        o.sayName = function() {
            alert(this.name);
        };
        return o;
    }
    var person1 = createPerson("Nicholas", 29, "Software Engineer");
    var person2 = createPerson("Greg", 27, "Doctor");
  ```

  * ### 构造函数模式
  ```js
    function Person(name, age, job) {
        this.name = name;
        this.age = age;
        this.job = job;
        this.sayName = function() {
            alert(this.name);
        };
    }
    var person1 = new Person("Nicholas", 29, "Software Engineer");
    var person2 = new Person("Greg", 27, "Doctor");
  ```
    * 区别在于没有显示地创建对象；
    * 直接将属性和方法赋给了this对象；
    * 没有return语句。

    调用构造函数实际上会经历4个步骤：
    * 创建一个新对象；
    * 将构造函数的作用域赋值给新对象；
    * 执行构造函数中的代码；
    * 返回新对象。
